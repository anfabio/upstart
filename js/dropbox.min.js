!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Dropbox={})}(this,(function(e){"use strict";var t={accountSetProfilePhoto:function(e){return this.request("account/set_profile_photo",e,"user","api","rpc")},authTokenFromOauth1:function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc")},authTokenRevoke:function(e){return this.request("auth/token/revoke",e,"user","api","rpc")},checkApp:function(e){return this.request("check/app",e,"app","api","rpc")},checkUser:function(e){return this.request("check/user",e,"user","api","rpc")},cloudDocsGetContent:function(e){return this.request("cloud_docs/get_content",e,"user","content","download")},cloudDocsGetMetadata:function(e){return this.request("cloud_docs/get_metadata",e,"user","api","rpc")},cloudDocsLock:function(e){return this.request("cloud_docs/lock",e,"user","api","rpc")},cloudDocsRename:function(e){return this.request("cloud_docs/rename",e,"user","api","rpc")},cloudDocsUnlock:function(e){return this.request("cloud_docs/unlock",e,"user","api","rpc")},cloudDocsUpdateContent:function(e){return this.request("cloud_docs/update_content",e,"user","content","upload")},contactsDeleteManualContacts:function(e){return this.request("contacts/delete_manual_contacts",e,"user","api","rpc")},contactsDeleteManualContactsBatch:function(e){return this.request("contacts/delete_manual_contacts_batch",e,"user","api","rpc")},filePropertiesPropertiesAdd:function(e){return this.request("file_properties/properties/add",e,"user","api","rpc")},filePropertiesPropertiesOverwrite:function(e){return this.request("file_properties/properties/overwrite",e,"user","api","rpc")},filePropertiesPropertiesRemove:function(e){return this.request("file_properties/properties/remove",e,"user","api","rpc")},filePropertiesPropertiesSearch:function(e){return this.request("file_properties/properties/search",e,"user","api","rpc")},filePropertiesPropertiesSearchContinue:function(e){return this.request("file_properties/properties/search/continue",e,"user","api","rpc")},filePropertiesPropertiesUpdate:function(e){return this.request("file_properties/properties/update",e,"user","api","rpc")},filePropertiesTemplatesAddForTeam:function(e){return this.request("file_properties/templates/add_for_team",e,"team","api","rpc")},filePropertiesTemplatesAddForUser:function(e){return this.request("file_properties/templates/add_for_user",e,"user","api","rpc")},filePropertiesTemplatesGetForTeam:function(e){return this.request("file_properties/templates/get_for_team",e,"team","api","rpc")},filePropertiesTemplatesGetForUser:function(e){return this.request("file_properties/templates/get_for_user",e,"user","api","rpc")},filePropertiesTemplatesListForTeam:function(e){return this.request("file_properties/templates/list_for_team",e,"team","api","rpc")},filePropertiesTemplatesListForUser:function(e){return this.request("file_properties/templates/list_for_user",e,"user","api","rpc")},filePropertiesTemplatesRemoveForTeam:function(e){return this.request("file_properties/templates/remove_for_team",e,"team","api","rpc")},filePropertiesTemplatesRemoveForUser:function(e){return this.request("file_properties/templates/remove_for_user",e,"user","api","rpc")},filePropertiesTemplatesUpdateForTeam:function(e){return this.request("file_properties/templates/update_for_team",e,"team","api","rpc")},filePropertiesTemplatesUpdateForUser:function(e){return this.request("file_properties/templates/update_for_user",e,"user","api","rpc")},fileRequestsCount:function(e){return this.request("file_requests/count",e,"user","api","rpc")},fileRequestsCreate:function(e){return this.request("file_requests/create",e,"user","api","rpc")},fileRequestsDelete:function(e){return this.request("file_requests/delete",e,"user","api","rpc")},fileRequestsDeleteAllClosed:function(e){return this.request("file_requests/delete_all_closed",e,"user","api","rpc")},fileRequestsGet:function(e){return this.request("file_requests/get",e,"user","api","rpc")},fileRequestsListV2:function(e){return this.request("file_requests/list_v2",e,"user","api","rpc")},fileRequestsList:function(e){return this.request("file_requests/list",e,"user","api","rpc")},fileRequestsListContinue:function(e){return this.request("file_requests/list/continue",e,"user","api","rpc")},fileRequestsUpdate:function(e){return this.request("file_requests/update",e,"user","api","rpc")},filesAlphaGetMetadata:function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc")},filesAlphaUpload:function(e){return this.request("files/alpha/upload",e,"user","content","upload")},filesCopyV2:function(e){return this.request("files/copy_v2",e,"user","api","rpc")},filesCopy:function(e){return this.request("files/copy",e,"user","api","rpc")},filesCopyBatchV2:function(e){return this.request("files/copy_batch_v2",e,"user","api","rpc")},filesCopyBatch:function(e){return this.request("files/copy_batch",e,"user","api","rpc")},filesCopyBatchCheckV2:function(e){return this.request("files/copy_batch/check_v2",e,"user","api","rpc")},filesCopyBatchCheck:function(e){return this.request("files/copy_batch/check",e,"user","api","rpc")},filesCopyReferenceGet:function(e){return this.request("files/copy_reference/get",e,"user","api","rpc")},filesCopyReferenceSave:function(e){return this.request("files/copy_reference/save",e,"user","api","rpc")},filesCreateFolderV2:function(e){return this.request("files/create_folder_v2",e,"user","api","rpc")},filesCreateFolder:function(e){return this.request("files/create_folder",e,"user","api","rpc")},filesCreateFolderBatch:function(e){return this.request("files/create_folder_batch",e,"user","api","rpc")},filesCreateFolderBatchCheck:function(e){return this.request("files/create_folder_batch/check",e,"user","api","rpc")},filesDeleteV2:function(e){return this.request("files/delete_v2",e,"user","api","rpc")},filesDelete:function(e){return this.request("files/delete",e,"user","api","rpc")},filesDeleteBatch:function(e){return this.request("files/delete_batch",e,"user","api","rpc")},filesDeleteBatchCheck:function(e){return this.request("files/delete_batch/check",e,"user","api","rpc")},filesDownload:function(e){return this.request("files/download",e,"user","content","download")},filesDownloadZip:function(e){return this.request("files/download_zip",e,"user","content","download")},filesExport:function(e){return this.request("files/export",e,"user","content","download")},filesGetFileLockBatch:function(e){return this.request("files/get_file_lock_batch",e,"user","api","rpc")},filesGetMetadata:function(e){return this.request("files/get_metadata",e,"user","api","rpc")},filesGetPreview:function(e){return this.request("files/get_preview",e,"user","content","download")},filesGetTemporaryLink:function(e){return this.request("files/get_temporary_link",e,"user","api","rpc")},filesGetTemporaryUploadLink:function(e){return this.request("files/get_temporary_upload_link",e,"user","api","rpc")},filesGetThumbnail:function(e){return this.request("files/get_thumbnail",e,"user","content","download")},filesGetThumbnailV2:function(e){return this.request("files/get_thumbnail_v2",e,"app, user","content","download")},filesGetThumbnailBatch:function(e){return this.request("files/get_thumbnail_batch",e,"user","content","rpc")},filesListFolder:function(e){return this.request("files/list_folder",e,"user","api","rpc")},filesListFolderContinue:function(e){return this.request("files/list_folder/continue",e,"user","api","rpc")},filesListFolderGetLatestCursor:function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc")},filesListFolderLongpoll:function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc")},filesListRevisions:function(e){return this.request("files/list_revisions",e,"user","api","rpc")},filesLockFileBatch:function(e){return this.request("files/lock_file_batch",e,"user","api","rpc")},filesMoveV2:function(e){return this.request("files/move_v2",e,"user","api","rpc")},filesMove:function(e){return this.request("files/move",e,"user","api","rpc")},filesMoveBatchV2:function(e){return this.request("files/move_batch_v2",e,"user","api","rpc")},filesMoveBatch:function(e){return this.request("files/move_batch",e,"user","api","rpc")},filesMoveBatchCheckV2:function(e){return this.request("files/move_batch/check_v2",e,"user","api","rpc")},filesMoveBatchCheck:function(e){return this.request("files/move_batch/check",e,"user","api","rpc")},filesPermanentlyDelete:function(e){return this.request("files/permanently_delete",e,"user","api","rpc")},filesPropertiesAdd:function(e){return this.request("files/properties/add",e,"user","api","rpc")},filesPropertiesOverwrite:function(e){return this.request("files/properties/overwrite",e,"user","api","rpc")},filesPropertiesRemove:function(e){return this.request("files/properties/remove",e,"user","api","rpc")},filesPropertiesTemplateGet:function(e){return this.request("files/properties/template/get",e,"user","api","rpc")},filesPropertiesTemplateList:function(e){return this.request("files/properties/template/list",e,"user","api","rpc")},filesPropertiesUpdate:function(e){return this.request("files/properties/update",e,"user","api","rpc")},filesRestore:function(e){return this.request("files/restore",e,"user","api","rpc")},filesSaveUrl:function(e){return this.request("files/save_url",e,"user","api","rpc")},filesSaveUrlCheckJobStatus:function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc")},filesSearch:function(e){return this.request("files/search",e,"user","api","rpc")},filesSearchV2:function(e){return this.request("files/search_v2",e,"user","api","rpc")},filesSearchContinueV2:function(e){return this.request("files/search/continue_v2",e,"user","api","rpc")},filesUnlockFileBatch:function(e){return this.request("files/unlock_file_batch",e,"user","api","rpc")},filesUpload:function(e){return this.request("files/upload",e,"user","content","upload")},filesUploadSessionAppendV2:function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload")},filesUploadSessionAppend:function(e){return this.request("files/upload_session/append",e,"user","content","upload")},filesUploadSessionFinish:function(e){return this.request("files/upload_session/finish",e,"user","content","upload")},filesUploadSessionFinishBatch:function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc")},filesUploadSessionFinishBatchCheck:function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc")},filesUploadSessionStart:function(e){return this.request("files/upload_session/start",e,"user","content","upload")},paperDocsArchive:function(e){return this.request("paper/docs/archive",e,"user","api","rpc")},paperDocsCreate:function(e){return this.request("paper/docs/create",e,"user","api","upload")},paperDocsDownload:function(e){return this.request("paper/docs/download",e,"user","api","download")},paperDocsFolderUsersList:function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc")},paperDocsFolderUsersListContinue:function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc")},paperDocsGetFolderInfo:function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc")},paperDocsList:function(e){return this.request("paper/docs/list",e,"user","api","rpc")},paperDocsListContinue:function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc")},paperDocsPermanentlyDelete:function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc")},paperDocsSharingPolicyGet:function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc")},paperDocsSharingPolicySet:function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc")},paperDocsUpdate:function(e){return this.request("paper/docs/update",e,"user","api","upload")},paperDocsUsersAdd:function(e){return this.request("paper/docs/users/add",e,"user","api","rpc")},paperDocsUsersList:function(e){return this.request("paper/docs/users/list",e,"user","api","rpc")},paperDocsUsersListContinue:function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc")},paperDocsUsersRemove:function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc")},paperFoldersCreate:function(e){return this.request("paper/folders/create",e,"user","api","rpc")},sharingAddFileMember:function(e){return this.request("sharing/add_file_member",e,"user","api","rpc")},sharingAddFolderMember:function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc")},sharingChangeFileMemberAccess:function(e){return this.request("sharing/change_file_member_access",e,"user","api","rpc")},sharingCheckJobStatus:function(e){return this.request("sharing/check_job_status",e,"user","api","rpc")},sharingCheckRemoveMemberJobStatus:function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc")},sharingCheckShareJobStatus:function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc")},sharingCreateSharedLink:function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc")},sharingCreateSharedLinkWithSettings:function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc")},sharingGetFileMetadata:function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc")},sharingGetFileMetadataBatch:function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc")},sharingGetFolderMetadata:function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc")},sharingGetSharedLinkFile:function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download")},sharingGetSharedLinkMetadata:function(e){return this.request("sharing/get_shared_link_metadata",e,"user","api","rpc")},sharingGetSharedLinks:function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc")},sharingListFileMembers:function(e){return this.request("sharing/list_file_members",e,"user","api","rpc")},sharingListFileMembersBatch:function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc")},sharingListFileMembersContinue:function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc")},sharingListFolderMembers:function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc")},sharingListFolderMembersContinue:function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc")},sharingListFolders:function(e){return this.request("sharing/list_folders",e,"user","api","rpc")},sharingListFoldersContinue:function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc")},sharingListMountableFolders:function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc")},sharingListMountableFoldersContinue:function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc")},sharingListReceivedFiles:function(e){return this.request("sharing/list_received_files",e,"user","api","rpc")},sharingListReceivedFilesContinue:function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc")},sharingListSharedLinks:function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc")},sharingModifySharedLinkSettings:function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc")},sharingMountFolder:function(e){return this.request("sharing/mount_folder",e,"user","api","rpc")},sharingRelinquishFileMembership:function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc")},sharingRelinquishFolderMembership:function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc")},sharingRemoveFileMember:function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc")},sharingRemoveFileMember2:function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc")},sharingRemoveFolderMember:function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc")},sharingRevokeSharedLink:function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc")},sharingSetAccessInheritance:function(e){return this.request("sharing/set_access_inheritance",e,"user","api","rpc")},sharingShareFolder:function(e){return this.request("sharing/share_folder",e,"user","api","rpc")},sharingTransferFolder:function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc")},sharingUnmountFolder:function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc")},sharingUnshareFile:function(e){return this.request("sharing/unshare_file",e,"user","api","rpc")},sharingUnshareFolder:function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc")},sharingUpdateFileMember:function(e){return this.request("sharing/update_file_member",e,"user","api","rpc")},sharingUpdateFolderMember:function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc")},sharingUpdateFolderPolicy:function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc")},teamLogGetEvents:function(e){return this.request("team_log/get_events",e,"team","api","rpc")},teamLogGetEventsContinue:function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc")},usersFeaturesGetValues:function(e){return this.request("users/features/get_values",e,"user","api","rpc")},usersGetAccount:function(e){return this.request("users/get_account",e,"user","api","rpc")},usersGetAccountBatch:function(e){return this.request("users/get_account_batch",e,"user","api","rpc")},usersGetCurrentAccount:function(e){return this.request("users/get_current_account",e,"user","api","rpc")},usersGetSpaceUsage:function(e){return this.request("users/get_space_usage",e,"user","api","rpc")}};function r(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)}function n(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||"undefined"==typeof module||"undefined"!=typeof window}function i(e){return"https://"+e+".dropboxapi.com/2/"}function s(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,r)}var o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function f(e){return function(t,r,o,u,a,c){return a.checkAndRefreshAccessToken().then((function(){if("user"!==o)throw Error("Unexpected auth type: "+o);var e={method:"POST",headers:{Authorization:"Bearer "+a.getAccessToken(),"Dropbox-API-Arg":s(r)}};return c&&(c.selectUser&&(e.headers["Dropbox-API-Select-User"]=c.selectUser),c.selectAdmin&&(e.headers["Dropbox-API-Select-Admin"]=c.selectAdmin),c.pathRoot&&(e.headers["Dropbox-API-Path-Root"]=c.pathRoot)),e})).then((function(r){return e(i(u)+t,r)})).then((function(e){return function(e){return e.ok?n()?e.blob():e.buffer():e.text()}(e).then((function(t){return[e,t]}))})).then((function(e){var t=p(e,2);return function(e,t){if(!e.ok)throw{error:t,response:e,status:e.status};var r=JSON.parse(e.headers.get("dropbox-api-result"));return n()?r.fileBlob=t:r.fileBinary=t,r}(t[0],t[1])}))}}function h(e){return function(t,r,n,o,u,a){return u.checkAndRefreshAccessToken().then((function(){if("user"!==n)throw Error("Unexpected auth type: "+n);var e=r.contents;delete r.contents;var t={body:e,method:"POST",headers:{Authorization:"Bearer "+u.getAccessToken(),"Content-Type":"application/octet-stream","Dropbox-API-Arg":s(r)}};return a&&(a.selectUser&&(t.headers["Dropbox-API-Select-User"]=a.selectUser),a.selectAdmin&&(t.headers["Dropbox-API-Select-Admin"]=a.selectAdmin),a.pathRoot&&(t.headers["Dropbox-API-Path-Root"]=a.pathRoot)),t})).then((function(r){return e(i(o)+t,r)})).then((function(e){return function(e){var t=e.clone();return new Promise((function(r){e.json().then((function(e){return r(e)})).catch((function(){return t.text().then((function(e){return r(e)}))}))})).then((function(t){return[e,t]}))}(e)})).then((function(e){var t=p(e,2),r=t[0],n=t[1];if(!r.ok)throw{error:n,response:r,status:r.status};return n}))}}var l="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d=[],m=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,g=!1;function v(){g=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;64>t;++t)d[t]=e[t],m[e.charCodeAt(t)]=t;m[45]=62,m[95]=63}function b(e,t,r){for(var n,i=[],s=t;r>s;s+=3)i.push(d[(n=(e[s]<<16)+(e[s+1]<<8)+e[s+2])>>18&63]+d[n>>12&63]+d[n>>6&63]+d[63&n]);return i.join("")}function y(e){var t;g||v();for(var r=e.length,n=r%3,i="",s=[],o=0,u=r-n;u>o;o+=16383)s.push(b(e,o,o+16383>u?u:o+16383));return 1===n?(i+=d[(t=e[r-1])>>2],i+=d[t<<4&63],i+="=="):2===n&&(i+=d[(t=(e[r-2]<<8)+e[r-1])>>10],i+=d[t>>4&63],i+=d[t<<2&63],i+="="),s.push(i),s.join("")}function q(e,t,r,n,i){var s,o,u=8*i-n-1,a=(1<<u)-1,c=a>>1,p=-7,f=r?i-1:0,h=r?-1:1,l=e[t+f];for(f+=h,s=l&(1<<-p)-1,l>>=-p,p+=u;p>0;s=256*s+e[t+f],f+=h,p-=8);for(o=s&(1<<-p)-1,s>>=-p,p+=n;p>0;o=256*o+e[t+f],f+=h,p-=8);if(0===s)s=1-c;else{if(s===a)return o?NaN:1/0*(l?-1:1);o+=Math.pow(2,n),s-=c}return(l?-1:1)*o*Math.pow(2,s-n)}function w(e,t,r,n,i,s){var o,u,a,c=8*s-i-1,p=(1<<c)-1,f=p>>1,h=23===i?5.960464477539062e-8:0,l=n?0:s-1,d=n?1:-1,m=0>t||0===t&&0>1/t?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(u=isNaN(t)?1:0,o=p):(1>t*(a=Math.pow(2,-(o=Math.floor(Math.log(t)/Math.LN2))))&&(o--,a*=2),2>(t+=1>o+f?h*Math.pow(2,1-f):h/a)*a||(o++,a/=2),p>o+f?1>o+f?(u=t*Math.pow(2,f-1)*Math.pow(2,i),o=0):(u=(t*a-1)*Math.pow(2,i),o+=f):(u=0,o=p));i>=8;e[r+l]=255&u,l+=d,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;e[r+l]=255&o,l+=d,o/=256,c-=8);e[r+l-d]|=128*m}var A={}.toString,k=Array.isArray||function(e){return"[object Array]"==A.call(e)};function R(){return E.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function T(e,t){if(R()<t)throw new RangeError("Invalid typed array length");return E.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=E.prototype:(null===e&&(e=new E(t)),e.length=t),e}function E(e,t,r){if(!(E.TYPED_ARRAY_SUPPORT||this instanceof E))return new E(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return L(this,e)}return P(this,e,t,r)}function P(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(0>r||r>t.byteLength)throw new RangeError("'offset' is out of bounds");if(r+(n||0)>t.byteLength)throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);E.TYPED_ARRAY_SUPPORT?(e=t).__proto__=E.prototype:e=C(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!E.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|M(t,r),i=(e=T(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(D(t)){var r=0|U(t.length);return 0===(e=T(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?T(e,0):C(e,t);if("Buffer"===t.type&&k(t.data))return C(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function S(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function L(e,t){if(S(t),e=T(e,0>t?0:0|U(t)),!E.TYPED_ARRAY_SUPPORT)for(var r=0;t>r;++r)e[r]=0;return e}function C(e,t){var r=0>t.length?0:0|U(t.length);e=T(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function U(e){if(e>=R())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R().toString(16)+" bytes");return 0|e}function D(e){return!(null==e||!e._isBuffer)}function M(e,t){if(D(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return oe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ue(e).length;default:if(n)return oe(e).length;t=(""+t).toLowerCase(),n=!0}}function x(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if((t>>>=0)>=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return K(this,t,r);case"utf8":case"utf-8":return J(this,t,r);case"ascii":return H(this,t,r);case"latin1":case"binary":return W(this,t,r);case"base64":return z(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function F(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function B(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),isNaN(r=+r)&&(r=i?0:e.length-1),0>r&&(r=e.length+r),e.length>r){if(0>r){if(!i)return-1;r=0}}else{if(i)return-1;r=e.length-1}if("string"==typeof t&&(t=E.from(t,n)),D(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"==typeof t)return t&=255,E.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){var s,o=1,u=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;o=2,u/=2,a/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var p=-1;for(s=r;u>s;s++)if(c(e,s)===c(t,-1===p?0:s-p)){if(-1===p&&(p=s),s-p+1===a)return p*o}else-1!==p&&(s-=s-p),p=-1}else for(r+a>u&&(r=u-a),s=r;s>=0;s--){for(var f=!0,h=0;a>h;h++)if(c(e,s+h)!==c(t,h)){f=!1;break}if(f)return s}return-1}function O(e,t,r,n){var i=e.length-(r=Number(r)||0);n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;n>o;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[r+o]=u}return o}function G(e,t,r,n){return ae(oe(t,e.length-r),e,r,n)}function Y(e,t,r,n){return ae(function(e){for(var t=[],r=0;e.length>r;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function j(e,t,r,n){return Y(e,t,r,n)}function N(e,t,r,n){return ae(ue(t),e,r,n)}function V(e,t,r,n){return ae(function(e,t){for(var r,n,i=[],s=0;e.length>s&&0<=(t-=2);++s)r=e.charCodeAt(s),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function z(e,t,r){return y(0===t&&r===e.length?e:e.slice(t,r))}function J(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;r>i;){var s,o,u,a,c=e[i],p=null,f=c>239?4:c>223?3:c>191?2:1;if(r>=i+f)switch(f){case 1:128>c&&(p=c);break;case 2:128==(192&(s=e[i+1]))&&(a=(31&c)<<6|63&s)>127&&(p=a);break;case 3:o=e[i+2],128==(192&(s=e[i+1]))&&128==(192&o)&&(a=(15&c)<<12|(63&s)<<6|63&o)>2047&&(55296>a||a>57343)&&(p=a);break;case 4:o=e[i+2],u=e[i+3],128==(192&(s=e[i+1]))&&128==(192&o)&&128==(192&u)&&(a=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&u)>65535&&1114112>a&&(p=a)}null===p?(p=65533,f=1):p>65535&&(n.push((p-=65536)>>>10&1023|55296),p=56320|1023&p),n.push(p),i+=f}return function(e){var t=e.length;if(4096>=t)return String.fromCharCode.apply(String,e);var r="",n=0;for(;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}E.TYPED_ARRAY_SUPPORT=void 0===l.TYPED_ARRAY_SUPPORT||l.TYPED_ARRAY_SUPPORT,E.poolSize=8192,E._augment=function(e){return e.__proto__=E.prototype,e},E.from=function(e,t,r){return P(null,e,t,r)},E.TYPED_ARRAY_SUPPORT&&(E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array),E.alloc=function(e,t,r){return function(e,t,r,n){return S(t),t>0&&void 0!==r?"string"==typeof n?T(e,t).fill(r,n):T(e,t).fill(r):T(e,t)}(null,e,t,r)},E.allocUnsafe=function(e){return L(null,e)},E.allocUnsafeSlow=function(e){return L(null,e)},E.isBuffer=function(e){return null!=e&&(!!e._isBuffer||ce(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&ce(e.slice(0,0))}(e))},E.compare=function(e,t){if(!D(e)||!D(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);s>i;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return n>r?-1:r>n?1:0},E.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(e,t){if(!k(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return E.alloc(0);var r;if(void 0===t)for(t=0,r=0;e.length>r;++r)t+=e[r].length;var n=E.allocUnsafe(t),i=0;for(r=0;e.length>r;++r){var s=e[r];if(!D(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},E.byteLength=M,E.prototype._isBuffer=!0,E.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)F(this,t,t+1);return this},E.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)F(this,t,t+3),F(this,t+1,t+2);return this},E.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)F(this,t,t+7),F(this,t+1,t+6),F(this,t+2,t+5),F(this,t+3,t+4);return this},E.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?J(this,0,e):x.apply(this,arguments)},E.prototype.equals=function(e){if(!D(e))throw new TypeError("Argument must be a Buffer");return this===e||0===E.compare(this,e)},E.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},E.prototype.compare=function(e,t,r,n,i){if(!D(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),0>t||r>e.length||0>n||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),u=Math.min(s,o),a=this.slice(n,i),c=e.slice(t,r),p=0;u>p;++p)if(a[p]!==c[p]){s=a[p],o=c[p];break}return o>s?-1:s>o?1:0},E.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},E.prototype.indexOf=function(e,t,r){return B(this,e,t,r,!0)},E.prototype.lastIndexOf=function(e,t,r){return B(this,e,t,r,!1)},E.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return O(this,e,t,r);case"utf8":case"utf-8":return G(this,e,t,r);case"ascii":return Y(this,e,t,r);case"latin1":case"binary":return j(this,e,t,r);case"base64":return N(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;++i)n+=String.fromCharCode(127&e[i]);return n}function W(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;++i)n+=String.fromCharCode(e[i]);return n}function K(e,t,r){var n=e.length;t&&t>=0||(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",s=t;r>s;++s)i+=se(e[s]);return i}function Q(e,t,r){for(var n=e.slice(t,r),i="",s=0;n.length>s;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function Z(e,t,r){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function X(e,t,r,n,i,s){if(!D(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||s>t)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function $(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);s>i;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function ee(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);s>i;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function te(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function re(e,t,r,n,i){return i||te(e,0,r,4),w(e,t,r,n,23,4),r+4}function ne(e,t,r,n,i){return i||te(e,0,r,8),w(e,t,r,n,52,8),r+8}E.prototype.slice=function(e,t){var r,n=this.length;if(0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),e>t&&(t=e),E.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=E.prototype;else{var i=t-e;r=new E(i,void 0);for(var s=0;i>s;++s)r[s]=this[s+e]}return r},E.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Z(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},E.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Z(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},E.prototype.readUInt8=function(e,t){return t||Z(e,1,this.length),this[e]},E.prototype.readUInt16LE=function(e,t){return t||Z(e,2,this.length),this[e]|this[e+1]<<8},E.prototype.readUInt16BE=function(e,t){return t||Z(e,2,this.length),this[e]<<8|this[e+1]},E.prototype.readUInt32LE=function(e,t){return t||Z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},E.prototype.readUInt32BE=function(e,t){return t||Z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},E.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Z(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)>n||(n-=Math.pow(2,8*t)),n},E.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Z(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return(i*=128)>s||(s-=Math.pow(2,8*t)),s},E.prototype.readInt8=function(e,t){return t||Z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},E.prototype.readInt16LE=function(e,t){t||Z(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},E.prototype.readInt16BE=function(e,t){t||Z(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},E.prototype.readInt32LE=function(e,t){return t||Z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},E.prototype.readInt32BE=function(e,t){return t||Z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},E.prototype.readFloatLE=function(e,t){return t||Z(e,4,this.length),q(this,e,!0,23,4)},E.prototype.readFloatBE=function(e,t){return t||Z(e,4,this.length),q(this,e,!1,23,4)},E.prototype.readDoubleLE=function(e,t){return t||Z(e,8,this.length),q(this,e,!0,52,8)},E.prototype.readDoubleBE=function(e,t){return t||Z(e,8,this.length),q(this,e,!1,52,8)},E.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||X(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},E.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||X(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},E.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,1,255,0),E.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},E.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},E.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},E.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ee(this,e,t,!0),t+4},E.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ee(this,e,t,!1),t+4},E.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);X(this,e,t,r,i-1,-i)}var s=0,o=1,u=0;for(this[t]=255&e;++s<r&&(o*=256);)0>e&&0===u&&0!==this[t+s-1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+r},E.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);X(this,e,t,r,i-1,-i)}var s=r-1,o=1,u=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)0>e&&0===u&&0!==this[t+s+1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+r},E.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,1,127,-128),E.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},E.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},E.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},E.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,4,2147483647,-2147483648),E.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ee(this,e,t,!0),t+4},E.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||X(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),E.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ee(this,e,t,!1),t+4},E.prototype.writeFloatLE=function(e,t,r){return re(this,e,t,!0,r)},E.prototype.writeFloatBE=function(e,t,r){return re(this,e,t,!1,r)},E.prototype.writeDoubleLE=function(e,t,r){return ne(this,e,t,!0,r)},E.prototype.writeDoubleBE=function(e,t,r){return ne(this,e,t,!1,r)},E.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),e.length>t||(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),n-r>e.length-t&&(n=e.length-t+r);var i,s=n-r;if(this===e&&t>r&&n>t)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(1e3>s||!E.TYPED_ARRAY_SUPPORT)for(i=0;s>i;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},E.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!E.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(0>t||t>this.length||r>this.length)throw new RangeError("Out of range index");if(t>=r)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;r>s;++s)this[s]=e;else{var o=D(e)?e:oe(""+new E(e,n)),u=o.length;for(s=0;r-t>s;++s)this[s+t]=o[s%u]}return this};var ie=/[^+\/0-9A-Za-z-_]/g;function se(e){return 16>e?"0"+e.toString(16):e.toString(16)}function oe(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;n>o;++o){if((r=e.charCodeAt(o))>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,128>r){if(0>(t-=1))break;s.push(r)}else if(2048>r){if(0>(t-=2))break;s.push(r>>6|192,63&r|128)}else if(65536>r){if(0>(t-=3))break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(r>=1114112)throw Error("Invalid code point");if(0>(t-=4))break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function ue(e){return function(e){var t,r,n,i,s,o;g||v();var u=e.length;if(u%4>0)throw Error("Invalid string. Length must be a multiple of 4");o=new _(3*u/4-(s="="===e[u-2]?2:"="===e[u-1]?1:0)),n=s>0?u-4:u;var a=0;for(t=0,r=0;n>t;t+=4,r+=3)i=m[e.charCodeAt(t)]<<18|m[e.charCodeAt(t+1)]<<12|m[e.charCodeAt(t+2)]<<6|m[e.charCodeAt(t+3)],o[a++]=i>>16&255,o[a++]=i>>8&255,o[a++]=255&i;return 2===s?(i=m[e.charCodeAt(t)]<<2|m[e.charCodeAt(t+1)]>>4,o[a++]=255&i):1===s&&(i=m[e.charCodeAt(t)]<<10|m[e.charCodeAt(t+1)]<<4|m[e.charCodeAt(t+2)]>>2,o[a++]=i>>8&255,o[a++]=255&i),o}(function(e){if(2>(e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(ie,"")).length)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ae(e,t,r,n){for(var i=0;n>i&&(i+r<t.length&&i<e.length);++i)t[i+r]=e[i];return i}function ce(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var pe=void 0;try{pe=require("crypto")}catch(e){pe=window.crypto}var fe=void 0;try{var he=require("util");fe=he.TextEncoder}catch(e){fe=TextEncoder}var le=["legacy","offline","online"],de=["code","token"],me=["none","user","team"],_e="https://api.dropboxapi.com/oauth2/token";function ge(e){var t=e.clone();return new Promise((function(r){e.json().then((function(e){return r(e)})).catch((function(){return t.text().then((function(e){return r(e)}))}))})).then((function(t){return[e,t]}))}function ve(e){return new Date(Date.now()+1e3*e)}"function"!=typeof Object.assign&&(Object.assign=function(e){var t,r,n,i;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),r=1;arguments.length>r;r++)if(null!=(n=arguments[r]))for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var i,s,o=0|t,u=Math.max(0>o?n-Math.abs(o):o,0);for(;n>u;){if((i=r[u])===(s=e)||"number"==typeof i&&"number"==typeof s&&isNaN(i)&&isNaN(s))return!0;u++}return!1}});var be=function(){function e(t){o(this,e),this.accessToken=(t=t||{}).accessToken,this.accessTokenExpiresAt=t.accessTokenExpiresAt,this.refreshToken=t.refreshToken,this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.selectUser=t.selectUser,this.selectAdmin=t.selectAdmin,this.fetch=t.fetch||fetch,this.pathRoot=t.pathRoot,t.fetch||console.warn("Global fetch is deprecated and will be unsupported in a future version. Please pass fetch function as option when instantiating dropbox instance: new Dropbox({fetch})")}return u(e,[{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(e){this.clientSecret=e}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(e){this.refreshToken=e}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(e){this.accessTokenExpiresAt=e}},{key:"generatePKCECodes",value:function(){var e=pe.randomBytes(128);e=e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"").substr(0,128),this.codeVerifier=e;var t=(new fe).encode(e),r=pe.createHash("sha256").update(t).digest();r=r.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),this.codeChallenge=r}},{key:"getAuthenticationUrl",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"token",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"legacy",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=this.getClientId(),a="https://www.dropbox.com/oauth2/authorize";if(!u)throw Error("A client id is required. You can set the client id using .setClientId().");if("code"!==r&&!e)throw Error("A redirect uri is required.");if(!de.includes(r))throw Error("Authorization type must be code or token");if(!le.includes(n))throw Error("Token Access Type must be legacy, offline, or online");if(i&&!(i instanceof Array))throw Error("Scope must be an array of strings");if(!me.includes(s))throw Error("includeGrantedScopes must be none, user, or team");var c=void 0;return c="code"===r?a+"?response_type=code&client_id="+u:a+"?response_type=token&client_id="+u,e&&(c+="&redirect_uri="+e),t&&(c+="&state="+t),"legacy"!==n&&(c+="&token_access_type="+n),i&&(c+="&scope="+i.join(" ")),"none"!==s&&(c+="&include_granted_scopes="+s),o&&(this.generatePKCECodes(),c+="&code_challenge_method=S256",c+="&code_challenge="+this.codeChallenge),c}},{key:"getAccessTokenFromCode",value:function(e,t){var r=this.getClientId(),n=this.getClientSecret();if(!r)throw Error("A client id is required. You can set the client id using .setClientId().");var i=_e;if(i+="?grant_type=authorization_code",i+="&code="+t,i+="&client_id="+r,n)i+="&client_secret="+n;else{if(!this.codeChallenge)throw Error("You must use PKCE when generating the authorization URL to not include a client secret");i+="&code_verifier="+this.codeVerifier}e&&(i+="&redirect_uri="+e);return this.fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return ge(e)})).then((function(e){var t=p(e,2),r=t[0],n=t[1];if(!r.ok)throw{error:n,response:r,status:r.status};return n.refresh_token?{accessToken:n.access_token,refreshToken:n.refresh_token,accessTokenExpiresAt:ve(n.expires_in)}:n.access_token}))}},{key:"checkAndRefreshAccessToken",value:function(){var e=this.getRefreshToken()&&this.getClientId(),t=this.getAccessTokenExpiresAt()&&new Date(Date.now()+3e5)>=this.getAccessTokenExpiresAt(),r=!this.getAccessToken();return(t||r)&&e?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=_e,n=this.getClientId(),i=this.getClientSecret();if(!n)throw Error("A client id is required. You can set the client id using .setClientId().");if(t&&!(t instanceof Array))throw Error("Scope must be an array of strings");var s={"Content-Type":"application/json"};r+="?grant_type=refresh_token&refresh_token="+this.getRefreshToken(),r+="&client_id="+n,i&&(r+="&client_secret="+i),t&&(r+="&scope="+t.join(" "));var o={method:"POST"};return o.headers=s,this.fetch(r,o).then((function(e){return ge(e)})).then((function(t){var r=p(t,2),n=r[0],i=r[1];if(!n.ok)throw{error:i,response:n,status:n.status};e.setAccessToken(i.access_token),e.setAccessTokenExpiresAt(ve(i.expires_in))}))}},{key:"authenticateWithCordova",value:function(e,t){var r=this.getAuthenticationUrl("https://www.dropbox.com/1/oauth2/redirect_receiver"),n=!1,i=window.open(r,"_blank");function s(e){-999!==e.code&&(window.setTimeout((function(){i.close()}),10),t())}function o(r){if(r.url.indexOf("&error=")>-1)window.setTimeout((function(){i.close()}),10),t();else{var n=r.url.indexOf("#access_token="),s=r.url.indexOf("&token_type=");if(n>-1){n+=14,window.setTimeout((function(){i.close()}),10);var o=r.url.substring(n,s);e(o)}}}i.addEventListener("loaderror",s),i.addEventListener("loadstop",o),i.addEventListener("exit",(function e(){n||(i.removeEventListener("loaderror",s),i.removeEventListener("loadstop",o),i.removeEventListener("exit",e),n=!0)}))}},{key:"request",value:function(e,t,r,n,i){var s=null;switch(i){case"rpc":s=this.getRpcRequest();break;case"download":s=this.getDownloadRequest();break;case"upload":s=this.getUploadRequest();break;default:throw Error("Invalid request style: "+i)}return s(e,t,r,n,this,{selectUser:this.selectUser,selectAdmin:this.selectAdmin,clientId:this.getClientId(),clientSecret:this.getClientSecret(),pathRoot:this.pathRoot})}},{key:"setRpcRequest",value:function(e){this.rpcRequest=e}},{key:"getRpcRequest",value:function(){return void 0===this.rpcRequest&&(this.rpcRequest=function(e){return function(t,r,n,s,o,u){return o.checkAndRefreshAccessToken().then((function(){var e={method:"POST",body:r?JSON.stringify(r):null},t={};r&&(t["Content-Type"]="application/json");var i="";switch(n){case"app":if(!u.clientId||!u.clientSecret)throw Error("A client id and secret is required for this function");i=new E(u.clientId+":"+u.clientSecret).toString("base64"),t.Authorization="Basic "+i;break;case"team":case"user":t.Authorization="Bearer "+o.getAccessToken();break;case"noauth":break;default:throw Error("Unhandled auth type: "+n)}return u&&(u.selectUser&&(t["Dropbox-API-Select-User"]=u.selectUser),u.selectAdmin&&(t["Dropbox-API-Select-Admin"]=u.selectAdmin),u.pathRoot&&(t["Dropbox-API-Path-Root"]=u.pathRoot)),e.headers=t,e})).then((function(r){return e(i(s)+t,r)})).then((function(e){return function(e){return"application/json"===e.headers.get("Content-Type")?e.json().then((function(t){return[e,t]})):e.text().then((function(t){return[e,t]}))}(e)})).then((function(e){var t=p(e,2),r=t[0],n=t[1];if(!r.ok)throw{error:n,response:r,status:r.status};return n}))}}(this.fetch)),this.rpcRequest}},{key:"setDownloadRequest",value:function(e){this.downloadRequest=e}},{key:"getDownloadRequest",value:function(){return void 0===this.downloadRequest&&(this.downloadRequest=f(this.fetch)),this.downloadRequest}},{key:"setUploadRequest",value:function(e){this.uploadRequest=e}},{key:"getUploadRequest",value:function(){return void 0===this.uploadRequest&&(this.uploadRequest=h(this.fetch)),this.uploadRequest}}]),e}(),ye=function(e){function r(e){o(this,r);var n=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return Object.assign(n,t),n}return a(r,e),u(r,[{key:"filesGetSharedLinkFile",value:function(e){return this.request("sharing/get_shared_link_file",e,"api","download")}}]),r}(be),qe=Object.freeze({__proto__:null,Dropbox:ye}),we={teamDevicesListMemberDevices:function(e){return this.request("team/devices/list_member_devices",e,"team","api","rpc")},teamDevicesListMembersDevices:function(e){return this.request("team/devices/list_members_devices",e,"team","api","rpc")},teamDevicesListTeamDevices:function(e){return this.request("team/devices/list_team_devices",e,"team","api","rpc")},teamDevicesRevokeDeviceSession:function(e){return this.request("team/devices/revoke_device_session",e,"team","api","rpc")},teamDevicesRevokeDeviceSessionBatch:function(e){return this.request("team/devices/revoke_device_session_batch",e,"team","api","rpc")},teamFeaturesGetValues:function(e){return this.request("team/features/get_values",e,"team","api","rpc")},teamGetInfo:function(e){return this.request("team/get_info",e,"team","api","rpc")},teamGroupsCreate:function(e){return this.request("team/groups/create",e,"team","api","rpc")},teamGroupsDelete:function(e){return this.request("team/groups/delete",e,"team","api","rpc")},teamGroupsGetInfo:function(e){return this.request("team/groups/get_info",e,"team","api","rpc")},teamGroupsJobStatusGet:function(e){return this.request("team/groups/job_status/get",e,"team","api","rpc")},teamGroupsList:function(e){return this.request("team/groups/list",e,"team","api","rpc")},teamGroupsListContinue:function(e){return this.request("team/groups/list/continue",e,"team","api","rpc")},teamGroupsMembersAdd:function(e){return this.request("team/groups/members/add",e,"team","api","rpc")},teamGroupsMembersList:function(e){return this.request("team/groups/members/list",e,"team","api","rpc")},teamGroupsMembersListContinue:function(e){return this.request("team/groups/members/list/continue",e,"team","api","rpc")},teamGroupsMembersRemove:function(e){return this.request("team/groups/members/remove",e,"team","api","rpc")},teamGroupsMembersSetAccessType:function(e){return this.request("team/groups/members/set_access_type",e,"team","api","rpc")},teamGroupsUpdate:function(e){return this.request("team/groups/update",e,"team","api","rpc")},teamLegalHoldsCreatePolicy:function(e){return this.request("team/legal_holds/create_policy",e,"team","api","rpc")},teamLegalHoldsGetPolicy:function(e){return this.request("team/legal_holds/get_policy",e,"team","api","rpc")},teamLegalHoldsListHeldRevisions:function(e){return this.request("team/legal_holds/list_held_revisions",e,"team","api","rpc")},teamLegalHoldsListHeldRevisionsContinue:function(e){return this.request("team/legal_holds/list_held_revisions_continue",e,"team","api","rpc")},teamLegalHoldsListPolicies:function(e){return this.request("team/legal_holds/list_policies",e,"team","api","rpc")},teamLegalHoldsReleasePolicy:function(e){return this.request("team/legal_holds/release_policy",e,"team","api","rpc")},teamLegalHoldsUpdatePolicy:function(e){return this.request("team/legal_holds/update_policy",e,"team","api","rpc")},teamLinkedAppsListMemberLinkedApps:function(e){return this.request("team/linked_apps/list_member_linked_apps",e,"team","api","rpc")},teamLinkedAppsListMembersLinkedApps:function(e){return this.request("team/linked_apps/list_members_linked_apps",e,"team","api","rpc")},teamLinkedAppsListTeamLinkedApps:function(e){return this.request("team/linked_apps/list_team_linked_apps",e,"team","api","rpc")},teamLinkedAppsRevokeLinkedApp:function(e){return this.request("team/linked_apps/revoke_linked_app",e,"team","api","rpc")},teamLinkedAppsRevokeLinkedAppBatch:function(e){return this.request("team/linked_apps/revoke_linked_app_batch",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersAdd:function(e){return this.request("team/member_space_limits/excluded_users/add",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersList:function(e){return this.request("team/member_space_limits/excluded_users/list",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersListContinue:function(e){return this.request("team/member_space_limits/excluded_users/list/continue",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersRemove:function(e){return this.request("team/member_space_limits/excluded_users/remove",e,"team","api","rpc")},teamMemberSpaceLimitsGetCustomQuota:function(e){return this.request("team/member_space_limits/get_custom_quota",e,"team","api","rpc")},teamMemberSpaceLimitsRemoveCustomQuota:function(e){return this.request("team/member_space_limits/remove_custom_quota",e,"team","api","rpc")},teamMemberSpaceLimitsSetCustomQuota:function(e){return this.request("team/member_space_limits/set_custom_quota",e,"team","api","rpc")},teamMembersAdd:function(e){return this.request("team/members/add",e,"team","api","rpc")},teamMembersAddJobStatusGet:function(e){return this.request("team/members/add/job_status/get",e,"team","api","rpc")},teamMembersDeleteProfilePhoto:function(e){return this.request("team/members/delete_profile_photo",e,"team","api","rpc")},teamMembersGetInfo:function(e){return this.request("team/members/get_info",e,"team","api","rpc")},teamMembersList:function(e){return this.request("team/members/list",e,"team","api","rpc")},teamMembersListContinue:function(e){return this.request("team/members/list/continue",e,"team","api","rpc")},teamMembersMoveFormerMemberFiles:function(e){return this.request("team/members/move_former_member_files",e,"team","api","rpc")},teamMembersMoveFormerMemberFilesJobStatusCheck:function(e){return this.request("team/members/move_former_member_files/job_status/check",e,"team","api","rpc")},teamMembersRecover:function(e){return this.request("team/members/recover",e,"team","api","rpc")},teamMembersRemove:function(e){return this.request("team/members/remove",e,"team","api","rpc")},teamMembersRemoveJobStatusGet:function(e){return this.request("team/members/remove/job_status/get",e,"team","api","rpc")},teamMembersSecondaryEmailsAdd:function(e){return this.request("team/members/secondary_emails/add",e,"team","api","rpc")},teamMembersSecondaryEmailsDelete:function(e){return this.request("team/members/secondary_emails/delete",e,"team","api","rpc")},teamMembersSecondaryEmailsResendVerificationEmails:function(e){return this.request("team/members/secondary_emails/resend_verification_emails",e,"team","api","rpc")},teamMembersSendWelcomeEmail:function(e){return this.request("team/members/send_welcome_email",e,"team","api","rpc")},teamMembersSetAdminPermissions:function(e){return this.request("team/members/set_admin_permissions",e,"team","api","rpc")},teamMembersSetProfile:function(e){return this.request("team/members/set_profile",e,"team","api","rpc")},teamMembersSetProfilePhoto:function(e){return this.request("team/members/set_profile_photo",e,"team","api","rpc")},teamMembersSuspend:function(e){return this.request("team/members/suspend",e,"team","api","rpc")},teamMembersUnsuspend:function(e){return this.request("team/members/unsuspend",e,"team","api","rpc")},teamNamespacesList:function(e){return this.request("team/namespaces/list",e,"team","api","rpc")},teamNamespacesListContinue:function(e){return this.request("team/namespaces/list/continue",e,"team","api","rpc")},teamPropertiesTemplateAdd:function(e){return this.request("team/properties/template/add",e,"team","api","rpc")},teamPropertiesTemplateGet:function(e){return this.request("team/properties/template/get",e,"team","api","rpc")},teamPropertiesTemplateList:function(e){return this.request("team/properties/template/list",e,"team","api","rpc")},teamPropertiesTemplateUpdate:function(e){return this.request("team/properties/template/update",e,"team","api","rpc")},teamReportsGetActivity:function(e){return this.request("team/reports/get_activity",e,"team","api","rpc")},teamReportsGetDevices:function(e){return this.request("team/reports/get_devices",e,"team","api","rpc")},teamReportsGetMembership:function(e){return this.request("team/reports/get_membership",e,"team","api","rpc")},teamReportsGetStorage:function(e){return this.request("team/reports/get_storage",e,"team","api","rpc")},teamTeamFolderActivate:function(e){return this.request("team/team_folder/activate",e,"team","api","rpc")},teamTeamFolderArchive:function(e){return this.request("team/team_folder/archive",e,"team","api","rpc")},teamTeamFolderArchiveCheck:function(e){return this.request("team/team_folder/archive/check",e,"team","api","rpc")},teamTeamFolderCreate:function(e){return this.request("team/team_folder/create",e,"team","api","rpc")},teamTeamFolderGetInfo:function(e){return this.request("team/team_folder/get_info",e,"team","api","rpc")},teamTeamFolderList:function(e){return this.request("team/team_folder/list",e,"team","api","rpc")},teamTeamFolderListContinue:function(e){return this.request("team/team_folder/list/continue",e,"team","api","rpc")},teamTeamFolderPermanentlyDelete:function(e){return this.request("team/team_folder/permanently_delete",e,"team","api","rpc")},teamTeamFolderRename:function(e){return this.request("team/team_folder/rename",e,"team","api","rpc")},teamTeamFolderUpdateSyncSettings:function(e){return this.request("team/team_folder/update_sync_settings",e,"team","api","rpc")},teamTokenGetAuthenticatedAdmin:function(e){return this.request("team/token/get_authenticated_admin",e,"team","api","rpc")}},Ae=function(e){function t(e){o(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.assign(r,we),r}return a(t,e),u(t,[{key:"actAsUser",value:function(e){return new ye({accessToken:this.accessToken,clientId:this.clientId,selectUser:e})}}]),t}(be),ke=Object.freeze({__proto__:null,DropboxTeam:Ae}),Re={Dropbox:qe.Dropbox,DropboxTeam:ke.DropboxTeam},Te=Re.DropboxTeam;e.Dropbox=Re.Dropbox,e.DropboxTeam=Te,e.default=Re,Object.defineProperty(e,"__esModule",{value:!0})}));
